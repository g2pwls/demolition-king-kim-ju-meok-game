<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>WebSocket í…ŒìŠ¤íŠ¸</title>
</head>
<body>
<h2>ğŸ‘‹ WebSocket ì—°ê²° í…ŒìŠ¤íŠ¸</h2>

<label for="uuid">User UUID:</label>
<input id="uuid" type="text" placeholder="ì˜ˆ: abc-111" />
<button onclick="connect()">ì—°ê²°</button>
<button onclick="disconnect()">ì¢…ë£Œ</button>

<p id="status">ğŸ”Œ ìƒíƒœ: Not Connected</p>

<script>
    let socket = null;

    function connect() {
        const userUuid = document.getElementById("uuid").value;
        if (!userUuid) {
            alert("UUIDë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return;
        }

        socket = new WebSocket(`ws://localhost:8080/ws/friend?user_uuid=${userUuid}`);

        socket.onopen = () => {
            console.log("âœ… ì—°ê²°ë¨");
            document.getElementById("status").innerText = "ğŸ”Œ ìƒíƒœ: Connected";
        };

        socket.onclose = () => {
            console.log("âŒ ì—°ê²° ì¢…ë£Œ");
            document.getElementById("status").innerText = "ğŸ”Œ ìƒíƒœ: Disconnected";
        };

        socket.onerror = (e) => {
            console.error("âš ï¸ ì—ëŸ¬ ë°œìƒ", e);
            document.getElementById("status").innerText = "ğŸ”Œ ìƒíƒœ: Error";
        };

        socket.onmessage = (msg) => {
            console.log("ğŸ“¨ ìˆ˜ì‹ :", msg.data);
        };
    }

    function disconnect() {
        if (socket) {
            socket.close();
        }
    }
</script>
</body>
</html>